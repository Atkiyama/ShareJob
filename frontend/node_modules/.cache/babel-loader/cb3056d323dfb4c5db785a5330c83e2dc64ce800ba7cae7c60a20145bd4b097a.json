{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akiyamashuuhei/data/ShereJob/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/akiyamashuuhei/data/ShereJob/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/akiyamashuuhei/data/ShereJob/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";/**\n *\tログイン画面\n * @param param0\n * @returns\n */function Login(_ref){var updatedLoginFlag=_ref.updatedLoginFlag;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate();/**\n\t *APIを呼び出してログイン処理を行う\n\t * @param e\n\t */var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,jsonResponse,name;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return fetch(process.env.REACT_APP_BASE_URL+\"user/login\",{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:jsonResponse=_context.sent;name=jsonResponse.name;if(jsonResponse.token){localStorage.setItem('token',jsonResponse.token);updatedLoginFlag(true);alert(name+'でログインしました');navigate('/pages/home');}else{alert('ログインに失敗しました');}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);alert('ログインに失敗しました');case 15:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();/**\n\t * タイトルを更新する\n\t */useEffect(function(){document.title='ログイン';},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" \\u30ED\\u30B0\\u30A4\\u30F3\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"text\",name:\"email\",placeholder:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",required:true}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:\"text\",name:\"password\",placeholder:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",required:true}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u30ED\\u30B0\\u30A4\\u30F3\"})]})]});}export default Login;","map":{"version":3,"names":["useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","updatedLoginFlag","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","navigate","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","jsonResponse","name","wrap","_callee$","_context","prev","next","preventDefault","fetch","process","env","REACT_APP_BASE_URL","method","headers","Accept","body","JSON","stringify","sent","json","token","localStorage","setItem","alert","t0","stop","_x","apply","arguments","document","title","children","onSubmit","value","onChange","target","type","placeholder","required"],"sources":["/Users/akiyamashuuhei/data/ShereJob/frontend/src/pages/user/login.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { LoginProps } from '../../utils/types';\n\n/**\n *\tログイン画面\n * @param param0\n * @returns\n */\nfunction Login({ updatedLoginFlag }: LoginProps) {\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst navigate = useNavigate();\n\n\t/**\n\t *APIを呼び出してログイン処理を行う\n\t * @param e\n\t */\n\tconst handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n\t\te.preventDefault();\n\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\tprocess.env.REACT_APP_BASE_URL! + `user/login`,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\temail: email,\n\t\t\t\t\t\tpassword: password,\n\t\t\t\t\t}),\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst jsonResponse = await response.json();\n\t\t\tconst name = jsonResponse.name;\n\t\t\tif (jsonResponse.token) {\n\t\t\t\tlocalStorage.setItem('token', jsonResponse.token);\n\t\t\t\tupdatedLoginFlag(true);\n\t\t\t\talert(name + 'でログインしました');\n\n\t\t\t\tnavigate('/pages/home');\n\t\t\t} else {\n\t\t\t\talert('ログインに失敗しました');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\talert('ログインに失敗しました');\n\t\t}\n\t};\n\n\t/**\n\t * タイトルを更新する\n\t */\n\tuseEffect(() => {\n\t\tdocument.title = 'ログイン';\n\t}, []);\n\n\treturn (\n\t\t<div>\n\t\t\t<h1> ログイン</h1>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<input\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tplaceholder=\"メールアドレス\"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tplaceholder=\"パスワード\"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<button>ログイン</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}