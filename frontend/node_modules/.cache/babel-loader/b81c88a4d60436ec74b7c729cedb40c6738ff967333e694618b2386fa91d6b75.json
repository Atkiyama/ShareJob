{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akiyamashuuhei/data/ShereJob/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/akiyamashuuhei/data/ShereJob/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/akiyamashuuhei/data/ShereJob/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{flexRender,getCoreRowModel,useReactTable}from'@tanstack/react-table';/**\n * 企業情報を検索する\n * @param param0\n * @returns\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchCompany(_ref){var searchedCompany=_ref.searchedCompany,updateSearchCompanyList=_ref.updateSearchCompanyList;var navigate=useNavigate();//検索ワード\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),word=_useState2[0],setWord=_useState2[1];//const [searchedCompany, setSearchedCompany] = useState<CompanyType[]>([]);\n//検索ワードのセッター\nvar updateWord=function updateWord(event){setWord(event.target.value);};useEffect(function(){document.title=\"\\u4F01\\u696D\\u691C\\u7D22\";});useEffect(function(){updateSearchCompanyList([]);},[word]);/**\n\t * 企業の詳細画面を開く\n\t * @param row idに企業のidが開く\n\t */var handleOpenDetail=function handleOpenDetail(row){navigate(\"/pages/company/companyAdd/\".concat(row.id));};/**\n\t * 表のヘッダーを定義\n\t */var columns=[{accessorKey:'name',header:''},{accessorKey:'abstract',header:''},{accessorKey:'actions',header:'',// 空のヘッダーを指定して編集ボタンの列を作成\ncell:function cell(rowContext){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleOpenDetail(rowContext.row.original);},children:\"\\u8A73\\u7D30\"});}}// 他のカラムを追加する場合はここに定義します\n];var data=searchedCompany;// 検索結果のデータを使用します\n/**\n\t * バックエンドに検索ワードを送信、結果を取得する\n\t */var handleSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,jsonResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(process.env.REACT_APP_BASE_URL+\"company/searchCompany/?words=\".concat(word),{method:'GET',headers:{'Content-Type':'application/json',authorization:\"Bearer \".concat(localStorage.getItem('token'))}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:jsonResponse=_context.sent;updateSearchCompanyList(jsonResponse.companyList);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);alert('検索に失敗しました');case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function handleSearch(){return _ref2.apply(this,arguments);};}();/**\n\t * ReactTableを定義\n\t */var table=useReactTable({data:data,columns:columns,getCoreRowModel:getCoreRowModel()});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u4F01\\u696D\\u691C\\u7D22\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{className:\"search-company__textarea\",value:word,onChange:updateWord,placeholder:\"\\u30AD\\u30FC\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"search-company__button\",onClick:handleSearch,children:\"\\u691C\\u7D22\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:table.getRowModel().rows.map(function(row,index){return/*#__PURE__*/_jsx(\"tr\",{children:row.getVisibleCells().map(function(cell,index){return/*#__PURE__*/_jsx(\"td\",{children:flexRender(cell.column.columnDef.cell,cell.getContext())},index);})},index);})})]})})]});}export default SearchCompany;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","flexRender","getCoreRowModel","useReactTable","jsx","_jsx","jsxs","_jsxs","SearchCompany","_ref","searchedCompany","updateSearchCompanyList","navigate","_useState","_useState2","_slicedToArray","word","setWord","updateWord","event","target","value","document","title","handleOpenDetail","row","concat","id","columns","accessorKey","header","cell","rowContext","onClick","original","children","data","handleSearch","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","jsonResponse","wrap","_callee$","_context","prev","next","fetch","process","env","REACT_APP_BASE_URL","method","headers","authorization","localStorage","getItem","sent","json","companyList","t0","alert","stop","apply","arguments","table","className","onChange","placeholder","getRowModel","rows","map","index","getVisibleCells","column","columnDef","getContext"],"sources":["/Users/akiyamashuuhei/data/ShereJob/frontend/src/pages/company/searchCompany.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { CompanyTableType, SearchCompanyProps } from '../../utils/types';\n\nimport {\n\tColumnDef,\n\tflexRender,\n\tgetCoreRowModel,\n\tuseReactTable,\n\tCellContext,\n} from '@tanstack/react-table';\n\n/**\n * 企業情報を検索する\n * @param param0\n * @returns\n */\nfunction SearchCompany({\n\tsearchedCompany,\n\tupdateSearchCompanyList,\n}: SearchCompanyProps) {\n\tconst navigate = useNavigate();\n\t//検索ワード\n\tconst [word, setWord] = useState<string>('');\n\t//const [searchedCompany, setSearchedCompany] = useState<CompanyType[]>([]);\n\n\t//検索ワードのセッター\n\tconst updateWord = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n\t\tsetWord(event.target.value);\n\t};\n\tuseEffect(() => {\n\t\tdocument.title = `企業検索`;\n\t});\n\n\tuseEffect(() => {\n\t\tupdateSearchCompanyList([]);\n\t}, [word]);\n\n\t/**\n\t * 企業の詳細画面を開く\n\t * @param row idに企業のidが開く\n\t */\n\tconst handleOpenDetail = (row: CompanyTableType) => {\n\t\tnavigate(`/pages/company/companyAdd/${row.id}`);\n\t};\n\n\t/**\n\t * 表のヘッダーを定義\n\t */\n\tconst columns: ColumnDef<CompanyTableType, any>[] = [\n\t\t{\n\t\t\taccessorKey: 'name',\n\t\t\theader: '',\n\t\t},\n\t\t{\n\t\t\taccessorKey: 'abstract',\n\t\t\theader: '',\n\t\t},\n\t\t{\n\t\t\taccessorKey: 'actions',\n\t\t\theader: '', // 空のヘッダーを指定して編集ボタンの列を作成\n\t\t\tcell: (rowContext: CellContext<CompanyTableType, any>) => (\n\t\t\t\t<button onClick={() => handleOpenDetail(rowContext.row.original)}>\n\t\t\t\t\t詳細\n\t\t\t\t</button>\n\t\t\t),\n\t\t},\n\t\t// 他のカラムを追加する場合はここに定義します\n\t];\n\n\tconst data = searchedCompany; // 検索結果のデータを使用します\n\n\t/**\n\t * バックエンドに検索ワードを送信、結果を取得する\n\t */\n\tconst handleSearch = async () => {\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\tprocess.env.REACT_APP_BASE_URL! +\n\t\t\t\t\t`company/searchCompany/?words=${word}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\tauthorization: `Bearer ${localStorage.getItem('token')}`,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst jsonResponse = await response.json();\n\t\t\tupdateSearchCompanyList(jsonResponse.companyList);\n\t\t} catch (err) {\n\t\t\talert('検索に失敗しました');\n\t\t}\n\t};\n\n\t/**\n\t * ReactTableを定義\n\t */\n\tconst table = useReactTable<CompanyTableType>({\n\t\tdata: data,\n\t\tcolumns,\n\t\tgetCoreRowModel: getCoreRowModel(),\n\t});\n\n\treturn (\n\t\t<div>\n\t\t\t<h1>企業検索</h1>\n\t\t\t<div>\n\t\t\t\t<textarea\n\t\t\t\t\tclassName=\"search-company__textarea\"\n\t\t\t\t\tvalue={word}\n\t\t\t\t\tonChange={updateWord}\n\t\t\t\t\tplaceholder=\"キーワードを入力してください\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<button className=\"search-company__button\" onClick={handleSearch}>\n\t\t\t\t検索\n\t\t\t</button>\n\t\t\t<div>\n\t\t\t\t<table className=\"table\">\n\t\t\t\t\t<thead></thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{table.getRowModel().rows.map((row, index) => (\n\t\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t\t{row.getVisibleCells().map((cell, index) => (\n\t\t\t\t\t\t\t\t\t<td key={index}>\n\t\t\t\t\t\t\t\t\t\t{flexRender(cell.column.columnDef.cell, cell.getContext())}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default SearchCompany;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}