{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport jwtDecode from 'jwt-decode';\nconst useToken = () => {\n  _s();\n  const [loginUser, setLoginUser] = useState(null); // 初期値をnullに設定\n  const token = localStorage.getItem('token');\n  const handleToken = () => {\n    if (token) {\n      const decoded = jwtDecode(token);\n      const user = {\n        name: decoded.name,\n        email: decoded.email\n      };\n      setLoginUser(user);\n    } else {\n      setLoginUser({\n        name: \"\",\n        email: \"\"\n      }); // トークンがない場合はnullに設定\n    }\n  };\n\n  useEffect(() => {\n    console.log(\"useToken\");\n    handleToken();\n  }, [token]);\n  return loginUser;\n};\n_s(useToken, \"gqXXUQNQklWEXvCRGW2oxAxqhaE=\");\nexport default useToken;","map":{"version":3,"names":["useState","useEffect","jwtDecode","useToken","_s","loginUser","setLoginUser","token","localStorage","getItem","handleToken","decoded","user","name","email","console","log"],"sources":["/Users/akiyamashuuhei/data/ShereJob/frontend/src/utils/useToken.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport jwtDecode from 'jwt-decode';\nimport { UserType } from './types';\n\nconst useToken = (): UserType | null => {\n    const [loginUser, setLoginUser] = useState<UserType | null>(null); // 初期値をnullに設定\n    const token = localStorage.getItem('token');\n    const handleToken = () => {\n\n        if (token) {\n            const decoded: { email: string; name: string } = jwtDecode(token);\n\n            const user: UserType = {\n                name: decoded.name,\n                email: decoded.email,\n            };\n            setLoginUser(user);\n        } else {\n            setLoginUser({\n                name: \"\",\n                email: \"\"\n            }); // トークンがない場合はnullに設定\n        }\n    };\n\n    useEffect(() => {\n        console.log(\"useToken\");\n        handleToken();\n    }, [token]);\n\n    return loginUser;\n};\n\nexport default useToken;\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,SAAS,MAAM,YAAY;AAGlC,MAAMC,QAAQ,GAAGA,CAAA,KAAuB;EAAAC,EAAA;EACpC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAAkB,IAAI,CAAC,CAAC,CAAC;EACnE,MAAMO,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMC,WAAW,GAAGA,CAAA,KAAM;IAEtB,IAAIH,KAAK,EAAE;MACP,MAAMI,OAAwC,GAAGT,SAAS,CAACK,KAAK,CAAC;MAEjE,MAAMK,IAAc,GAAG;QACnBC,IAAI,EAAEF,OAAO,CAACE,IAAI;QAClBC,KAAK,EAAEH,OAAO,CAACG;MACnB,CAAC;MACDR,YAAY,CAACM,IAAI,CAAC;IACtB,CAAC,MAAM;MACHN,YAAY,CAAC;QACTO,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE;MACX,CAAC,CAAC,CAAC,CAAC;IACR;EACJ,CAAC;;EAEDb,SAAS,CAAC,MAAM;IACZc,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;IACvBN,WAAW,CAAC,CAAC;EACjB,CAAC,EAAE,CAACH,KAAK,CAAC,CAAC;EAEX,OAAOF,SAAS;AACpB,CAAC;AAACD,EAAA,CA3BID,QAAQ;AA6Bd,eAAeA,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}