{"ast":null,"code":"import _slicedToArray from\"/Users/akiyamashuuhei/data/ShereJob/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import jwtDecode from'jwt-decode';var useToken=function useToken(loginFlag,updateLoginFlag){var _useState=useState({name:'',email:''}),_useState2=_slicedToArray(_useState,2),loginUser=_useState2[0],setLoginUser=_useState2[1];//const navigate = useNavigate();\nvar token=localStorage.getItem('token');var handleToken=function handleToken(loginFlag){if(token){var decoded=jwtDecode(token);var user={name:decoded.name,email:decoded.email};setLoginUser(user);if(!loginFlag){updateLoginFlag(true);}}else{var _user={name:\"\",email:\"\"};setLoginUser(_user);updateLoginFlag(false);}};useEffect(function(){handleToken(loginFlag);},[token,loginFlag]);return loginUser;};export default useToken;","map":{"version":3,"names":["useState","useEffect","jwtDecode","useToken","loginFlag","updateLoginFlag","_useState","name","email","_useState2","_slicedToArray","loginUser","setLoginUser","token","localStorage","getItem","handleToken","decoded","user"],"sources":["/Users/akiyamashuuhei/data/ShereJob/frontend/src/utils/useToken.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport jwtDecode from 'jwt-decode';\nimport { UserType } from './types';\n\n\nconst useToken = (loginFlag: boolean, updateLoginFlag: (updatedLoginFlag: boolean) => void): typeof loginUser => {\n    const [loginUser, setLoginUser] = useState<UserType>({\n        name: '',\n        email: '',\n    });\n    //const navigate = useNavigate();\n    const token = localStorage.getItem('token');\n    const handleToken = (loginFlag: boolean) => {\n        if (token) {\n            const decoded: { email: string, name: string } = jwtDecode(token);\n\n            const user: UserType = {\n                name: decoded.name,\n                email: decoded.email,\n            };\n            setLoginUser(user);\n            if (!loginFlag) {\n                updateLoginFlag(true);\n            }\n\n        } else {\n            const user: UserType = {\n                name: \"\",\n                email: \"\",\n            };\n            setLoginUser(user);\n            updateLoginFlag(false);\n        }\n    }\n    useEffect(() => {\n        handleToken(loginFlag);\n    }, [token, loginFlag]);\n\n\n    return loginUser;\n};\n\nexport default useToken;"],"mappings":"kIAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,SAAS,KAAM,YAAY,CAIlC,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,SAAkB,CAAEC,eAAoD,CAAuB,CAC7G,IAAAC,SAAA,CAAkCN,QAAQ,CAAW,CACjDO,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EACX,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAJ,SAAA,IAHKK,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAI9B;AACA,GAAM,CAAAI,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIZ,SAAkB,CAAK,CACxC,GAAIS,KAAK,CAAE,CACP,GAAM,CAAAI,OAAwC,CAAGf,SAAS,CAACW,KAAK,CAAC,CAEjE,GAAM,CAAAK,IAAc,CAAG,CACnBX,IAAI,CAAEU,OAAO,CAACV,IAAI,CAClBC,KAAK,CAAES,OAAO,CAACT,KACnB,CAAC,CACDI,YAAY,CAACM,IAAI,CAAC,CAClB,GAAI,CAACd,SAAS,CAAE,CACZC,eAAe,CAAC,IAAI,CAAC,CACzB,CAEJ,CAAC,IAAM,CACH,GAAM,CAAAa,KAAc,CAAG,CACnBX,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EACX,CAAC,CACDI,YAAY,CAACM,KAAI,CAAC,CAClBb,eAAe,CAAC,KAAK,CAAC,CAC1B,CACJ,CAAC,CACDJ,SAAS,CAAC,UAAM,CACZe,WAAW,CAACZ,SAAS,CAAC,CAC1B,CAAC,CAAE,CAACS,KAAK,CAAET,SAAS,CAAC,CAAC,CAGtB,MAAO,CAAAO,SAAS,CACpB,CAAC,CAED,cAAe,CAAAR,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}