{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport jwtDecode from 'jwt-decode';\nimport { useNavigate } from 'react-router-dom';\nconst useToken = () => {\n  _s();\n  const [loginUser, setLoginUser] = useState({\n    name: '',\n    email: ''\n  });\n  const navigate = useNavigate();\n  const token = localStorage.getItem('token');\n  const handleToken = () => {\n    if (token) {\n      const decoded = jwtDecode(token);\n      const user = {\n        name: decoded.name,\n        email: decoded.email\n      };\n      setLoginUser(user);\n    }\n  };\n  useEffect(() => {\n    handleToken();\n  }, [navigate]);\n  useEffect(() => {\n    handleToken();\n  });\n  return loginUser;\n};\n_s(useToken, \"1633EQKktL3F8TRr/5tGrS+v8Tc=\", false, function () {\n  return [useNavigate];\n});\nexport default useToken;","map":{"version":3,"names":["useState","useEffect","jwtDecode","useNavigate","useToken","_s","loginUser","setLoginUser","name","email","navigate","token","localStorage","getItem","handleToken","decoded","user"],"sources":["/Users/akiyamashuuhei/data/ShereJob/frontend/src/utils/useToken.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport jwtDecode from 'jwt-decode';\nimport { UserType } from './types';\nimport { useNavigate } from 'react-router-dom';\n\nconst useToken = (): typeof loginUser => {\n    const [loginUser, setLoginUser] = useState<UserType>({\n        name: '',\n        email: '',\n    });\n    const navigate = useNavigate();\n    const token = localStorage.getItem('token');\n    const handleToken = () => {\n        if (token) {\n            const decoded: { email: string, name: string } = jwtDecode(token);\n\n            const user: UserType = {\n                name: decoded.name,\n                email: decoded.email,\n            };\n            setLoginUser(user);\n        }\n    }\n    useEffect(() => {\n        handleToken();\n    }, [navigate]);\n    useEffect(() => {\n        handleToken();\n    });\n\n    return loginUser;\n};\n\nexport default useToken;\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,SAAS,MAAM,YAAY;AAElC,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,QAAQ,GAAGA,CAAA,KAAwB;EAAAC,EAAA;EACrC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGP,QAAQ,CAAW;IACjDQ,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE;EACX,CAAC,CAAC;EACF,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACtB,IAAIH,KAAK,EAAE;MACP,MAAMI,OAAwC,GAAGb,SAAS,CAACS,KAAK,CAAC;MAEjE,MAAMK,IAAc,GAAG;QACnBR,IAAI,EAAEO,OAAO,CAACP,IAAI;QAClBC,KAAK,EAAEM,OAAO,CAACN;MACnB,CAAC;MACDF,YAAY,CAACS,IAAI,CAAC;IACtB;EACJ,CAAC;EACDf,SAAS,CAAC,MAAM;IACZa,WAAW,CAAC,CAAC;EACjB,CAAC,EAAE,CAACJ,QAAQ,CAAC,CAAC;EACdT,SAAS,CAAC,MAAM;IACZa,WAAW,CAAC,CAAC;EACjB,CAAC,CAAC;EAEF,OAAOR,SAAS;AACpB,CAAC;AAACD,EAAA,CA1BID,QAAQ;EAAA,QAKOD,WAAW;AAAA;AAuBhC,eAAeC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}