{"ast":null,"code":"var _jsxFileName = \"/Users/akiyamashuuhei/data/ShereJob/frontend/src/pages/myCompany/editMemo.tsx\",\n  _s = $RefreshSig$();\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport CompanyDetail from '../../components/companyDetail';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditMemo(_ref) {\n  _s();\n  let {\n    user,\n    companyList,\n    myCompanyList,\n    updateUser,\n    updateMyCompanyList\n  } = _ref;\n  const {\n    email,\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  // 対応する会社情報を探す\n  const company = companyList.find(info => info.id === id);\n  //対応するメモを探す\n  const companyInfo = companyInfoList.find(info => info.id === id && info.email === email);\n  const [memo, setMemo] = useState((companyInfo === null || companyInfo === void 0 ? void 0 : companyInfo.memo) || '');\n  const handleMemoChange = event => {\n    setMemo(event.target.value);\n  };\n  /**\n   *APIにupdateリクエストする\n   */\n  const handleUpdate = async () => {\n    try {\n      await fetch(`http://localhost:5000/companyInfo/updateCompanyInfo/${email}/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          memo: memo\n        })\n      });\n      if (company) {\n        alert(`${company.name}のメモを登録しました`);\n      }\n    } catch (err) {\n      alert('更新に失敗しました');\n    }\n  };\n\n  /**\n   * メモ削除の処理をする\n   */\n  const handleDelete = async () => {\n    const confirmDelete = window.confirm('本当にメモを削除しますか？');\n    if (confirmDelete) {\n      try {\n        const response = await fetch(`http://localhost:5000/companyInfo/deleteCompanyInfo/${email}/${id}`, {\n          method: 'DELETE'\n        });\n        const jsonResponse = await response.json();\n        alert(jsonResponse.message);\n\n        // 削除が成功したら、リストから削除した情報を更新する\n        const updatedCompanyInfoList = companyInfoList.filter(info => info.id !== id);\n        updateCompanyInfoList(updatedCompanyInfoList);\n\n        // 削除後にリダイレクトするならば以下の行を有効化する\n        navigate('/pages/home');\n      } catch (err) {\n        alert('削除に失敗しました');\n      }\n    }\n  };\n  /**\n   *完了ボタンが押されたときの処理を実装する\n   */\n  const handleComplete = () => {\n    const updatedCompanyInfoList = companyInfoList.map(info => {\n      if (info.email === email && info.id === id) {\n        return {\n          ...info,\n          memo: memo\n        };\n      }\n      return info;\n    });\n    updateCompanyInfoList(updatedCompanyInfoList);\n    handleUpdate();\n    navigate('/pages/home');\n  };\n\n  /**\n   * タイトルを更新する\n   */\n  useEffect(() => {\n    if (company) {\n      document.title = `${company.name}のメモ`;\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [company ? /*#__PURE__*/_jsxDEV(CompanyDetail, {\n      company: company\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }, this) : null, company ? /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [company.name, \"\\u306E\\u30E1\\u30E2\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"textarea-container\",\n      children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"textarea\",\n        rows: 5,\n        value: memo,\n        onChange: handleMemoChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleComplete,\n      children: \"\\u5B8C\\u4E86\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleDelete,\n      children: \"\\u6D88\\u53BB\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 3\n  }, this);\n}\n_s(EditMemo, \"4V7pfF8g88po3txiOKdsaAMhRks=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditMemo;\nexport default EditMemo;\nvar _c;\n$RefreshReg$(_c, \"EditMemo\");","map":{"version":3,"names":["useParams","useNavigate","useState","useEffect","CompanyDetail","jsxDEV","_jsxDEV","EditMemo","_ref","_s","user","companyList","myCompanyList","updateUser","updateMyCompanyList","email","id","navigate","company","find","info","companyInfo","companyInfoList","memo","setMemo","handleMemoChange","event","target","value","handleUpdate","fetch","method","headers","body","JSON","stringify","alert","name","err","handleDelete","confirmDelete","window","confirm","response","jsonResponse","json","message","updatedCompanyInfoList","filter","updateCompanyInfoList","handleComplete","map","document","title","children","fileName","_jsxFileName","lineNumber","columnNumber","className","rows","onChange","onClick","_c","$RefreshReg$"],"sources":["/Users/akiyamashuuhei/data/ShereJob/frontend/src/pages/myCompany/editMemo.tsx"],"sourcesContent":["import { useParams, useNavigate } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport { EditMemoProps, MyCompanyType, CompanyType } from '../../utils/types';\nimport CompanyDetail from '../../components/companyDetail';\n\nfunction EditMemo({\n\tuser,\n\tcompanyList,\n\tmyCompanyList,\n\tupdateUser,\n\tupdateMyCompanyList,\n}: EditMemoProps) {\n\tconst { email, id } = useParams();\n\tconst navigate = useNavigate();\n\t// 対応する会社情報を探す\n\tconst company: CompanyType | undefined = companyList.find(\n\t\t(info) => info.id === id\n\t);\n\t//対応するメモを探す\n\tconst companyInfo: CompanyInfoType | undefined = companyInfoList.find(\n\t\t(info) => info.id === id && info.email === email\n\t);\n\n\tconst [memo, setMemo] = useState<string>(companyInfo?.memo || '');\n\n\tconst handleMemoChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n\t\tsetMemo(event.target.value);\n\t};\n\t/**\n\t *APIにupdateリクエストする\n\t */\n\tconst handleUpdate = async () => {\n\t\ttry {\n\t\t\tawait fetch(\n\t\t\t\t`http://localhost:5000/companyInfo/updateCompanyInfo/${email}/${id}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tmemo: memo,\n\t\t\t\t\t}),\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (company) {\n\t\t\t\talert(`${company.name}のメモを登録しました`);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\talert('更新に失敗しました');\n\t\t}\n\t};\n\n\t/**\n\t * メモ削除の処理をする\n\t */\n\tconst handleDelete = async () => {\n\t\tconst confirmDelete = window.confirm('本当にメモを削除しますか？');\n\t\tif (confirmDelete) {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`http://localhost:5000/companyInfo/deleteCompanyInfo/${email}/${id}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tconst jsonResponse = await response.json();\n\t\t\t\talert(jsonResponse.message);\n\n\t\t\t\t// 削除が成功したら、リストから削除した情報を更新する\n\t\t\t\tconst updatedCompanyInfoList = companyInfoList.filter(\n\t\t\t\t\t(info) => info.id !== id\n\t\t\t\t);\n\t\t\t\tupdateCompanyInfoList(updatedCompanyInfoList);\n\n\t\t\t\t// 削除後にリダイレクトするならば以下の行を有効化する\n\t\t\t\tnavigate('/pages/home');\n\t\t\t} catch (err) {\n\t\t\t\talert('削除に失敗しました');\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t *完了ボタンが押されたときの処理を実装する\n\t */\n\tconst handleComplete = () => {\n\t\tconst updatedCompanyInfoList = companyInfoList.map((info) => {\n\t\t\tif (info.email === email && info.id === id) {\n\t\t\t\treturn {\n\t\t\t\t\t...info,\n\t\t\t\t\tmemo: memo,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn info;\n\t\t});\n\n\t\tupdateCompanyInfoList(updatedCompanyInfoList);\n\t\thandleUpdate();\n\t\tnavigate('/pages/home');\n\t};\n\n\t/**\n\t * タイトルを更新する\n\t */\n\tuseEffect(() => {\n\t\tif (company) {\n\t\t\tdocument.title = `${company.name}のメモ`;\n\t\t}\n\t});\n\n\treturn (\n\t\t<div>\n\t\t\t{company ? <CompanyDetail company={company} /> : null}\n\t\t\t{company ? <h2>{company.name}のメモ</h2> : null}\n\t\t\t<div className=\"textarea-container\">\n\t\t\t\t<textarea\n\t\t\t\t\tclassName=\"textarea\"\n\t\t\t\t\trows={5}\n\t\t\t\t\tvalue={memo}\n\t\t\t\t\tonChange={handleMemoChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<button onClick={handleComplete}>完了</button>\n\t\t\t<button onClick={handleDelete}>消去</button>\n\t\t</div>\n\t);\n}\n\nexport default EditMemo;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}